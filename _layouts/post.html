---
layout: default
---
<article class="post">
  <h1>{{ page.title }}</h1>

  {% assign cat = page.categories[0] %}
  {% assign cat_list = site.categories[cat] %}
  {% for post in cat_list %}
    {% if post.url == page.url %}
      {% assign pOffset = forloop.index0 | minus: 1 %}
      {% assign nOffset = pOffset | plus: 2 %}
      {% if forloop.first == false %}
        {% assign next_post = cat_list[pOffset] %}
      {% endif %}
      {% if forloop.last == false %}
        {% assign previous_post = cat_list[nOffset] %}
      {% endif %}
      {% break %}
    {% endif %}
  {% endfor %}

  <div class="PageNavigation">
  {% if previous_post %}
    <a class="prev" href="{{previous_post.url}}">&laquo; {{previous_post.title}}</a>
  {% endif %}
  {% if next_post %}
    <a class="next" href="{{next_post.url}}">{{next_post.title}} &raquo;</a>
  {% endif %}
</div>

<div class="tags">
  {% assign sortedCategories = page.categories | sort %}
  {% for category in sortedCategories %}
      <span class="tag">
          <a href="/category/{{ category }}">#{{ category }}</a>
      </span>
  {% endfor %}
</div>

  <div class="entry">
    {{ content }}
  </div>

  <div class="date">
    Written on {{ page.date | date: "%B %e, %Y" }}
  </div>

  <div class="related">
    <h3>Related Posts</h3>
    <p>{{ page.categories }}</p>
    {% assign firstCategory = page.categories | first %}
    {% assign relatedCount = 0 %}
    {% for related in site.categories[firstCategory] %}
        <p>{{ related }}</p>
        {% unless page.permalink == related.permalink %}
            {% assign relatedCount = relatedCount | plus: 1 %}
            <a href="{{related.permalink}}">{{ related.title }}</a>
        {% endunless %}

        {% if relatedCount == 3 %}
            {% break %}
        {% endif %}
    {% endfor %}
  </div>

    {% for post in site.categories[page.tag] %}
        {% include post_preview.html %}
    {% endfor %}

  {% include disqus.html %}
</article>
